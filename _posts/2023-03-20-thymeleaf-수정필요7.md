---
title: Thymeleaf
tags: java
---

th:text="메뉴"   
단순 text 메뉴가 출력된다

th:text="${menu.name}"   
모델에 추가된 menu객체의 name속성이 출력된다. menu객체의 name속성에는 getter가 있어야 한다.   
view단에서는 getter가 필요하지만 MyBatis Mapper엔 getter가 없어도 속성명이 일치하면 됐다.

th:each="menu : ${list}"   
list 배열에 있는 객체 하나하나를 menu라는 이름으로 뽑아 쓸 수 있다.

th:utext="${menu.description}"   
예를들어 menu.description의 값이 <span style="color:red;font-weight:bold;">중요</span>일 때   
텍스트 그대로 출력되는 것이 아닌 html, css속성이 적용된 채로 출력된다.

th:text="${#numbers.formatInteger(menu.price,3,'COMMA')} + '원'"   
html에 있는 "4,500원"을 th:text="${menu.price}"로 대체할 경우가 있다.   
menu.price의 값이 서식이 있는 4,500원이 아닌 4500일 경우 서식을 붙여주는 방법이다.

th:href="@{detail(id=${menu.id}, n=${menu.name})}"   
@{detail}에 쿼리스트링(id=${menu.id})을 붙인걸로 생각하자.   
?(쿼리스트링)를 쓸 경우.

th:href="@{detail(id=${param.id}, op=lg)}"   
op가 고정값이다.

th:src="'/image/menu/' + ${menu.img}"   
th:src="@{/image/menu/{img}(img=${menu.img})}"   
?를 쓰지 않을 경우. ()안에 있는 데이터가 {img}를 채운다.

th:class="(${param.c}==${c.id})? 'menu-selected'"   
3항연산자. 조건이 참이면 .menu-selected 스타일을 추가한다. 하지만 위와같이 비교하면 정확한 비교가 되지 않는다.

th:class="${#strings.equals(param.c, c.id)}? 'menu-selected'"   
th:class="${not #strings.equals(param.c, c.id)}? 'menu-selected'"   
정확한 비교 방법. not을 붙이면 반대되는 값이 나온다.

<input type="hidden" name="c" th:value="${param.c}">   
<input type="text" name="q" th:value="${param.q}">   
두 번째 text input에 검색을 하면 이전 쿼리스트링이 날아가며 겸색한 text도 날아간다.   
c값을 저장하기 위해 보이지 않는 input으로 c를 입력한다.   
검색을 한다면 input에 입력한 텍스트가 쿼리스트링으로 전달되며 input에는 텍스트가 사라진다. value를 통해 쿼리스트링에서 q를 가져온다.

th:classappend="d-none"   
기존 class를 대체하지 않고 class에 d-none을 추가한다


?c=1&p=   
?c=1   
결과는 같으나 첫 번째 쿼리스트링은 p에 빈 문자열이 전달된다. p를 검사해야 하므로 성능이 느려진다.   
두 번째는 p가 없으므로 null이다.

?c=1&op=df   
?c=1   
op(option)을 생략하는 방식으로 default를 구현하거나 값을 명시해서 op=df(default)로 구현할 수 있다.

Circular View Path Error(Spring Thymeleaf view resolver Error)   
https://www.baeldung.com/spring-circular-view-path-error

View는 목록을 위해서만 만들어라 단일값을 가져올 땐 각자 가져오자.   
값 하나가 필요해도 레코드 단위로 가져와서 getter를 사용한다.

service는 하위 계층인 repository를 여러개 쓸 수 있다   
service 같은 계층인 service를 쓸 수 없다.   
html에서 href로 링크를 걸어서 클릭하면 url로 전달되며 해당 url에 매핑된 RequestMapping(get, post)을 찾는다


단순히 css, 값만 변경될 때 url을 수정하고 page를 다시 요청하면 서버에서 page를 만들어 클라이언트에게 오기까지 시간이 걸리며 page가 새로고침 된다.   
요즘은 rest방식으로 값만 가져와 page를 다시 요청하지 않고 javascript로 값만 바꾼다.

@Controller -> 문서명
/menu/list
/menu/detail?id=3

@RestController -> data
/menus		method:GET
/menus/3	method:GET(get) 3번 메뉴 줘
/menus/3	method:DELETE(delete)
/menus/3	method:PUT(edit)
/menus		method:POST(insert)

web이 지원하는 메소드는 많으나 html이 지원하는 메소드는 get, post뿐이다