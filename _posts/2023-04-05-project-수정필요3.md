---
title: 기록
tags: 
---

ctrl + c - TERMINAL에서 npm run serve 종료 단축키


### Vue Project(Frontend)와 Spring Boot Prject(Backend)를 연동해야 하는 이유 및 방법.

#### 이유
Spring Boot와 Vue.js를 서로 연동하지 않으면, Vue.js를 이용해 만든 클라이언트 쪽 페이지의 구성을 바꿀 때 마다 매번 build를 하고 build결과물을 Spring Boot 쪽의 resouces/static으로 이동시켜줘야한다.

#### 방법
개발 환경에선 Spring Boot 서버도 켜주고, Vue.js 서버도 켜서 port 두개를 두고 진행하게 될 테지만, 배포 시엔 서버를 두개나 두기엔 곤란할 수 있다.   
때문에 실 배포환경에선 연동을 통해 Vue.js의 빌드 결과물의 목적지를 Spring boot의 resources/static으로 맞추고, 실 서버는 Spring Boot 서버 하나만 두게 할 것이다.

연동은 Proxy 서버라는 것을 활용한다. 사용자가 프론트엔드 서버로 접근해서 리소스를 요청하면, 프록시는 이 요청을 백엔드로 연결시켜 요청을 전달한다.

#### 서버 포트 변경
두 프로젝트 모두 기본 server port가 8080이므로 한 서버는 port를 바꿔줘야 한다. Spring Boot server port를 8081로 설정했다.


#### 프록시 설정 vue.config.js(Vue 설정 파일) 

vue.config.js

```js
module.exports = {
  outputDir: "../Modeul/src/main/resources/static",  // 빌드 타겟 디렉토리
  devServer: {
    proxy: {
      '/api': {
        target: 'http://localhost:8081', // '/api' 로 들어오면 포트 8081(스프링 서버)로 보낸다
        changeOrigin: true // cross origin 허용
      }
    }
  }
};
```
요청을 받을 RestController

```java
@RestController
@RequestMapping("/api")
public class HelloWorldCtrl {

    @GetMapping("/hello")
    public String helloWorld() {
        return "hello!";
    }
}
```

**outputDir**
Vue.js 빌드 결과물을 Spring Boot 서버 쪽의 ../src/main/resouces/static 에 만들도록 설정한 것이다.

**devServer**
개발 환경에서의 서버를 설정한다.   
개발 환경에선 프록시로 데이터를 Vue.js 서버에서 Spring Boot로 넘겨주는 것이고, 실제 빌드/배포 시엔 설정해준 outputDir 를 통해 Vue.js 빌드 결과물을 Spring Boot 쪽 경로로 내보내고 Spring Boot 서버 하나만 배포한다.

proxy   
/api라는 경로로 접근하면, target(Spring Boot 서버)으로 요청을 넘긴다는 뜻이다.   
changeOrigin : "Cross Origin"을 허용한다는 뜻으로, 말 그대로 "교차 출처"를 허용한다는 말이다.   
"교차 출처" 라는 말이 다소 생소할 수 있는데, 쉽게 풀어 말하면 "다른 출처"이다.   
여기서 출처는 서로 다른 포트를 의미한다.   
즉, "서로 다른 출처의 리소스를 공유한다". 우린 이것을 CORS(Cross-Origin Resource Sharing)이라고 부른다.
	
출처 - [Vue.js 설치 및 Spring 연동](https://doozi0316.tistory.com/m/entry/Vuejs-Spring-Boot-MySQL-MyBatis-%EB%A7%9B%EC%A7%91-%EC%A7%80%EB%8F%84-%EB%A7%8C%EB%93%A4%EA%B8%B01-Spring-Boot-Vuejs-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0)
