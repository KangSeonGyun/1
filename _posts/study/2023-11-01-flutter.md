---
title: Flutter
tags: flutter
---

**출처 : https://www.youtube.com/@codingchef**

## Widget

* Stateless Widget

    이전 상호작용의 어떠한 값도 저장하지 않음

* Stateful Widget

    Value 값을 지속적으로 추적 보존

* Inherited Widget

## Widget tree

* Widget들은 tree 구조로 정리 된다. 한 Widget에 여러 자식 Widget이 있을 수 있다.

* Parent Widget은 Widget Container라고도 한다.

<img src="/assets/images/widgetTree.png" title="참고 이미지" alt="이미지" />

MyApp

- 최상위 Widget. Custom Widget. 이름 바꿔도 된다.

MaterialApp

- 실질적으로 앱을 빌드하는 Widget. 여기서 Flutter SDK에서 제공하는 Widget들을 사용할 수 있다.

MyHomePage

- 앱의 디자인, 기능들이 만들어지는 Widget. Custom Widget. 이름 바꿔도 된다.

<span style="color:#2D3748; background-color:#fff5b1">**Scaffold**<span>

- 앱 화면과 기능을 구성하기 위한 빈 페이지를 준비해주는 Widget. 앱의 구성요소(AppBar, 이미지, 버튼, 텍스트, 센터, 컬럼, 패딩 등...)들이 위치하는 공간.

## Widget LifrCycle

Stateless Widget은 생병주가가 없다.

Stateful Widget은 10단계의 생명주기가 있다.

* <span style="color:#2D3748; background-color:#fff5b1">createState()<span>

    **Widget의 상태를 생성**

* <span style="color:#2D3748; background-color:#fff5b1">mounted == true<span>

    mounted가 true면 buildContext 클래스에 접근할 수 있다.
    buildContext가 활성화돼야 setState()를 이용할 수 있다.

* <span style="color:#2D3748; background-color:#fff5b1">initState()<span>

    **Widget을 초기화 한다.**

    처음 필요한 데이터를 주고받을 때 한 번만 사용.

* <span style="color:#2D3748; background-color:#fff5b1">didChangeDependencies()<span>

    **의존성이 변경되면 호출한다**

    상속받은 위젯을 사용할 때 피상속자가 변경되면 호출

* <span style="color:#2D3748; background-color:#fff5b1">build()<span>

    **Widget을 화면에 표시한다.**

* <span style="color:#2D3748; background-color:#fff5b1">didUpdateWidget()<span>

    **위젯을 갱신한다.**

    부모 Widget이나 데이터가 변경되어 위젯을 갱신해야 할 때 호출

* <span style="color:#2D3748; background-color:#fff5b1">setState()<span>

    **Widget의 상태를 갱신한다.**

* <span style="color:#2D3748; background-color:#fff5b1">deactivate()<span>

    **Widget의 상태 관리를 중지한다.**

    State 객체가 플러터 구성 트리로부터 제거될 때 호출

* <span style="color:#2D3748; background-color:#fff5b1">dispose()<span>

    **Widget의 상태 관리를 완전히 끝낸다.**

    State 객체를 메모리에서 없앤다.

* <span style="color:#2D3748; background-color:#fff5b1">mounted == false<span>

    **생명주기 끝**

## Class와 생성자

* 보통의 생성자

```dart
Person(String name, int age){
    this.name = name;
    this.age = age;
}
```

* named argument

    argument를 중괄호(curly brackets)로 묶어 원하는 것만 입력할 수 있다.

```dart
Person({String name, int age}){
    this.name = name;
    this.age = age;
}
```

즉, 우리가 만들던 MaterialApp, Scaffold도 클래스이고 생성자를 통해 구현하고 있던 것이다.

```dart
MaterialApp(
      title: 'gyun',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MaterialFlutterApp(),
    );
```

## Widget

* Appbar

    화면 상단 위젯

    * 속성

        leading : 아이콘 버튼이나 간단한 위젯을 **왼쪽**에 배치할 때 사용

        actions : 복수의 아이콘 버튼 등을 **오른쪽**에 배치할 때 사용

        onPressed : 함수의 형태로 버튼을 터치했을 때 일어나는 이벤트를 정의하는 곳

* Drawer

    화면 옆 튀어나오는 메뉴

    * 속성
        
        child: ListView()를 이용해 만들 것 이다.

        UserAccountDrawerHeader() : Drawer 상단 부분

        ListTile() : ListView의 children으로 여러개 존재할 수 있다.

* Button

    *  RaisedButton → ElevatedButton
    ```
    ```

## BuildContext

* widget tree에서 현재 widget의 위치를 알 수 있는 정보를 갖고 있다.

    * build 함수는 Scaffold Widget을 return할 때 context를 넣어준다.

* 모든 widget은 자신만의 BuildContext를 갖고 있다.

* BuildContext는 stateless widget이나 state build 메소드에 의해 return된 widget의 부모가 된다.

하지만 Scaffold Widget의 위치를 알기 위해 Scaffold Widget context를 참조하면 해당 정보가 없다.   
이를 알려면 Scaffold Widget에서 build 메소드로 widget을 return해야 한다.   
이 widget은 진짜 Scaffold Widget context를 물려받는다.

## Tip

* onTap(), onPressed() 차이?

    기능상 거의 동일

    onPressed() - 주로 버튼에 사용

    onTap() - gestureDetector, InkWell에 사용, 길게누르기 두 번 탭하기에 사용

## Error

VScode와 FVM을 사용하던 도중 Terminal에서 'fvm flutter run'을 사용하면 앱이 켜지지만, VScode의 'Start Debugging'버튼을 누르면 fvm으로 설정한 version이 아니라 다른 flutter version으로 실행됐다.

버전 차이로 앱은 켜지지도 않았다.

Flutter Project내에 .dart_tool/version 파일을 확인하면 'Start Debugging'버튼을 눌렀을 때 flutter version이 바뀌는 걸 확인할 수 있다.

```
/Users/<사용자 이름>/Library/Application Support/Code/User/settings.json
```

위 파일 "dart.flutterSdkPath" 부분이 VScode flutter sdk를 고정시켜 놓은 것 이었다. 주석 처리하자...

---

VScode에서 The Flutter Daemon has terminated. 알림이 뜨며 내 안드로이드 기기가 인식되지 않았다.

```
cd ~/Library/Android/sdk/platform-tools/

./adb devices
```

위 명령어를 치면 아래와 같은 문구가 떳다.

```
* failed to start daemon
adb: failed to check server version: cannot connect to daemon 
```

컴퓨터 재부팅을 하니 해결됐다.

---