---
title: Vue
tags: vue javascript
---

나눠서 만들 때 장점

1. 협업가능
2. 재사용, 집중화 가능

Single page Application
index페이지

.vue를 이용해 page 분리하기

.vue 파일은 나중에 vue가 js로 컴파일한다

### index.html

```html

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="/css/reset.css" type="text/css" rel="stylesheet">
    <link href="/css/style.css" type="text/css" rel="stylesheet">
    <link href="/css/layout.css" type="text/css" rel="stylesheet">
    <link href="/css/header.css" type="text/css" rel="stylesheet">
    <link href="/css/footer.css" type="text/css" rel="stylesheet">

    <link href="/css/user/find-id.css" type="text/css" rel="stylesheet">
    <link href="/css/buttons.css" type="text/css" rel="stylesheet">
    <link href="/css/icon.css" type="text/css" rel="stylesheet">
    <link href="/css/deco.css" type="text/css" rel="stylesheet">
    <link href="/css/utils.css" type="text/css" rel="stylesheet">
</head>

<body>
    <div id="app"></div>
    <script type="module" src="src/main.js"></script>
</body>


</html>

```

### main.js

```js

import App from './App.vue'
import { createApp } from 'vue'

createApp(App)
.mount("#app")

```

### App.vue

```vue

<script>
import Header from "./components/Header.vue";
import Footer from "./components/Footer.vue"

export default {
    components:{
        Header,
        Footer
    },
    data() {
        return {
            test: "hello"
        };
    }
}
</script>

<template>

    <Header />
    <!-- export한 것을 app.vue가 받고 app.vue가 뿌린다 -->
    
    <!-- ---------------------------------------------------------------------- -->
    
    <!-- 여기엔 메인 내용이 있을 것이다. -->
    
    <!-- ---------------------------------------------------------------------- -->
    
    <Footer />
</template>

```

### Header.vue

```vue

<template>
    <header class="header fixed-header">
        <div>
            <h1 class="header-title"><a href="/index"><img class="logo" src="/image/logo-w.png" alt="알랜드"></a></h1>

            <ul class="main-menu d-none d-inline-flex-sm">
                <li><a class="" href="/menu/list">카페메뉴</a></li>
                <li><a class="" href="/notice/list">공지사항</a></li>
                <li><a class="" href="/user/login">로그인</a></li>
            </ul>
            <div class="d-none-sm"><a class="icon icon-menu icon-white" href="?m=on">메뉴버튼</a></div>
        </div>
    </header>
</template>

```

### Footer.vue

```vue

<template>
    <footer class="footer">
        <h2>알랜드(Rland)</h2>
        <div>
            copyright @ rland.co.kr 2022-2022 All Right Reservved. Contact admin@rland.co.kr for more information
        </div>
    </footer>
</template>

```

vue.js에서 페이지 간 이동을 위한 라이브러리 Vue Router 사용

web에서 routing은 좀 다르다
라우팅이란 클라이언트에서 url주소에 따라 페이지가 전환되는 것. 서버에서 새로 가져오지 않음

router-view
	페이지 표시 태그
	url에 따른 컴포넌트가 화면에 그려지는 영역
	
router-link to="경로"

컴파일 시, <a> 태그로 변환
to 속성
to 속성 값의 경로로 이동
v-bind와 함께 사용하면 동적으로 경로를 만들 수 있음
to="test/path" 처럼 붙이면 현재 url에 이 path가 붙고,
to="/test/detail" 처럼 붙이면 default url에 붙음 (대표적)
styling : router-link-exact-active 등 class를 통해 스타일을 줄 수 있음

router-link를 안쓰고 a를 쓰면 개발서버에서 링크를 클릭 했을 때 url이 #/로 끝난다.
<router-link :to="'detail?id=' + m.id">


--

상품에 맞는 detail 페이지 표시하기

1. query에서 id값 가져오기

링크 거는 방법
<router-link :to="'detail?id=' + m.id"></router-link>

쿼리스트링에서 값 져오는 방법
${this.$route.query.id}

```js
<script>
export default {
    data() {
        return { menu: null }
    },
    beforeCreate() {
        fetch(`http://localhost:8080/menus/${this.$route.query.id}`)
            .then(res => res.json())
            .then(result => this.menu = result)
    },
    created() {
        console.log(`created : ${this.menu}`);
    },
    beforeMount() {
        console.log(`beforeMount : ${this.menu}`);
    },
    mounted() {
        console.log(`mounted : ${this.menu}`);
    },
    updated() {
        console.log(`updated : ${this.menu}`);
    }

}
</script>
```

위와 같이 쿼리 값에서 id를 가져오고 그 id를 이용해 다시 데이터를 요청해서 view에서 사용하려 한다.

그럼 화면이 뜨기 전 단계에서 데이터 요청 한다면?
원하는 화면이 나오지만 콘솔에 에러가 뜬다.
beforeCreate menu는 undefined - 아직 data()도 만들어지지 않았다.
그 후 단계 created, beforeMount, mounted에선 menu가 null이고 페이지는 안 뜰 것이다

하지만 mounted 단계 전에 데이터를 빨리 받아온다면 menu가 null이라는 에러가 콘솔에 뜬 상태로 원하는 페이지가 보여질 것이다.

페이지가 보이기 전 단계(mounted)에서 데이터를 요청하는 것은 바람직 하지 않고 이후 menu가 null이 아닐 때 화면을 update하는 게 바람직 하다

해결 방법 - v-if를 하여 menu가 null이 아닐 때 update를 하여 화면을 갱신 해야 한다.

v-if는 안 보일땐 처리자체를 안한다

v-show 보이든 안 보이든 처리한다. d-none를 하는듯?

v-bind, css 와 같은 것은 화면에 보여졌을 때 효과를 줄 수 있는 것이다.


2. url 경로에서 가져오기

링크 거는 방법
<router-link :to="'./' + m.id"></router-link>

url 경로에서 값 가져오는 방법
${this.$route.params.id}

url경로가 바뀌었으므로 vue router의 path도 다음과 같이 수정해야 한다
path: 'menu/:id'
이것은 menu/ 뒤에 붙은 url을 id라는 이름으로 쓴다는 것.
url 경로에서 값을 가져올 때 ${this.$route.params.id} 마지막 .id쓴 이유가 이것이다.




